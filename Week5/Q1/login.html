<!DOCTYPE html>
<html>
<head>
    <title>N-Frnds | Login</title>
    <link rel="stylesheet" href="css/indexStyle.css">
    <link rel="stylesheet" href="css/footer.css">
    <link rel="stylesheet" href="css/indexPartnersPress.css">
    <link rel="stylesheet" href="css/indexSolutions.css">
    <link rel="stylesheet" href="css/indexWho.css">
    <link rel="stylesheet" href="css/loginStyle.css">
    <link rel="stylesheet" href="css/solutionsResponsive.css">
    <link rel="stylesheet" href="css/FooterResponsive.css">
    <meta charset="utf-8">
    <meta name = "viewport" content = "width=device-width, minimum-scale=1, maximum-scale=1">
    <link rel="shortcut icon" href="https://www.nfrnds.com/wp-content/themes/theme/img/favicon.ico">
</head>
<body>
  <div class="header" id="header">
      <a href="index.html">
        <img class="logo-img" id="logo-img" src="images/logo.png" alt="logo-img" />
      </a>
      <div class="others">
        <div class="header-btn">
          <a style="text-decoration: none;" href="#">
              <h3>About</h3></a>
        </div>
        <div class="header-btn">
          <a style="text-decoration: none;" href="#sols">
              <h3>Solutions</h3></a>
        </div>
        <div class="header-btn">
          <a style="text-decoration: none" href="#"
            ><h3>Press</h3></a
          >
        </div>
        <div class="header-btn">
          <a style="text-decoration: none" href="#"
            ><h3>Contact</h3></a
          >
        </div>
      </div>
  </div>

  <div class="active" id="active">
    <a href="index.html">
      <img class="logo-img" id="logo-img" src="images/logo_fixed.png" alt="logo-img" />
    </a>
    <div class="others">
      <div class="header-btn">
        <a style="text-decoration: none;" href="#">
            <h3>About</h3></a>
      </div>
      <div class="header-btn">
        <a style="text-decoration: none;" href="#sols">
            <h3>Solutions</h3></a>
      </div>
      <div class="header-btn">
        <a style="text-decoration: none" href="#"
          ><h3>Press</h3></a
        >
      </div>
      <div class="header-btn">
        <a style="text-decoration: none" href="#"
          ><h3>Contact</h3></a
        >
      </div>
    </div>
  </div>

  <div class="header-sm topnav" id="myTopnav">
    <a href="index.html"><img src="images/logo_fixed.png" class="Active"></a>
    <a href="javascript:void(0);" class="icon" onclick="myfunction()">&#9776;</a>
    <a class="dropdown-links link1" href="#">About</a>
    <a class="dropdown-links" href="index.html#sols">Solutions</a>
    <a class="dropdown-links" href="#">Press</a>
    <a class="dropdown-links link4" href="#">Contact</a>
  </div>
  

  <div class="indexPage">
      <div class="intro">
          <div class="intro-info">
            <div class="container">
              <div class="form-header">
                  <h2>LOGIN FORM</h2>
              </div>

              <form class="form" id="form">
                  <div style="text-align: left;" class="form-control">
                      <label>Mobile Number</label>
                      <input type="text" id="phone" placeholder="Enter your Mobile Number.">
                      <small id="errortext">Error Msg</small>
                  </div>
                  <input type="button" value="Submit" class="btn" id="submit" onclick="validation()">
              </form>

            </div>
          </div>
      </div>
  </div>

  <div class="footer">
      <img
        class="stars"
        src="images/footer_stars.svg" alt="footer-stars"
      />
      <img
        class="logo"
        src="images/footer_logo.svg" alt="footer-logo"
      />
      <div class="get-in-touch">
        <h5>
          Be in touch
          <span>info@nfrnds.com</span>
        </h5>
        <div class="icons">
          <a href="#"
            ><img class="icon-image" src="images/twitter.png" alt="twitter"
          /></a>
          <a href="#"
            ></a><img class="icon-image" src="images/facebook.png" alt="facebook"
          /></a>
          <a href="http://facebook.com/gonfrnds"
            ><img class="icon-image" src="images/youtube.png" alt="youtube"
          /></a>
          <a href="#"
            ><img class="icon-image" src="images/medium.png" alt="medium"
          /></a>
        </div>
      </div>
      <p class="ujwal-credit">
        Designed by
        <a href="#" target="_blank">Studio Ujwal</a>
      </p>
  </div>

  <script>
      window.addEventListener("scroll", function () {
        let header = document.querySelector(".header");
        var x = window.matchMedia("(min-width: 769px)");
        var windowPosition = window.scrollY > 100;
        if(x.matches){
          if (windowPosition) {
            document.getElementById("header").style.display="none";
            document.getElementById("active").style.display="block";

          } else {
            document.getElementById("header").style.display="block";
            document.getElementById("active").style.display="none";
          }
        }
      });

      function myFunction(x) {
        if (x.matches) { // If media query matches
          document.getElementById("header").style.display="block";
          document.getElementById("active").style.display="none";
          document.getElementById("myTopnav").style.display="none";
        } 
        else {
            document.getElementById("header").style.display="none";
            document.getElementById("active").style.display="none";
            document.getElementById("myTopnav").style.display="block";
        }
      }

      function myfunction() {
            // var x = document.getElementById("myTopnav");
            if (document.getElementById("myTopnav").className === "header-sm topnav") {
              document.getElementById("myTopnav").className += " responsive";
            } else {
              document.getElementById("myTopnav").className = "header-sm topnav";
            }
      }

      var x = window.matchMedia("(min-width: 769px)")
      myFunction(x) // Call listener function at run time
      x.addListener(myFunction)
  </script>

  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script>

    function validation(form) {
      var phone = document.getElementById('phone').value;
      
      if(phone.length < 12) {
        setErrorMsg(document.getElementById('phone'), 'Enter the valid Mobile Number');
        return;
      }

      var body = {
        "msisdn": document.getElementById('phone').value,
        "loginType":"KAIZALA",
        "groupId":"",
        "KIS":"",
        "actionPackageId":"",
        "version":"",
        "minorVersion":"",
      }

      $.ajax({
      url: "https://netco-indo-test.nfrnds.net:20003/fmcg-dd/login",
      headers: {
        "Content-Type": "application/json",
      },
      data: JSON.stringify(body),
      type: "POST",
      error: function(res) {
        console.log('Invalid User', res);
      },
      success: function(data) {
        if(data.token) {
          $.ajax({
								  url: "https://netco-indo-test.nfrnds.net:20003/fmcg-dd/initialData",
								  type: 'GET',
								  headers: {"Netco-JWT": data.token},
								  success:function(res){ 
								  	sessionStorage.setItem('token',true );
								  	alert('You are Successfully logged in.');
                    window.location.href="./app.html"; }
								});
        }
        else {
          setErrorMsg(document.getElementById('phone'), 'Invalid User!');
        }
      },
      });
    }

    function setErrorMsg(input, errormsgs) {
        event.preventDefault();
        const formControl = input.parentElement;
	      const small = formControl.querySelector('small');
	      formControl.className = "form-control error";
	      small.innerText = errormsgs;
    }



  </script>
</body>
</html>


